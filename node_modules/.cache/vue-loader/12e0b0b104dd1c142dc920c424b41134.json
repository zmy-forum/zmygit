{"remainingRequest":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\src\\views\\main\\bookself\\bookself.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\src\\views\\main\\bookself\\bookself.vue","mtime":1659527122853},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgSGVhZFRvcCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2hlYWRlci9IZWFkLnZ1ZScNCiAgZXhwb3J0IGRlZmF1bHR7DQogICAgICBjb21wb25lbnRzOntIZWFkVG9wfSwNCiAgICBkYXRhKCl7DQogICAgICByZXR1cm4gew0KICAgICAgICBib29rczogW10sDQogICAgICAgIG9wdGlvbjogW10sDQogICAgICAgIHZhbHVlOiBbXSwNCiAgICAgICAgaXNTaG93Q2hlY2s6IGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCl7DQogICAgICB0aGlzLmdldEJvb2tzKCk7DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICBnb0FkZCgpew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgcGF0aDogJy9jYXRlZ29yaWVzJw0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIGdldEJvb2tzKCl7DQogICAgICAgIGxldCBib29rSWRBcnJheSA9IFtdOw0KICAgICAgICBsZXQgbG9jYWxTaGVsZiA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdib29rJykpID8gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jvb2snKSkgOiB7fTsNCiAgICAgICAgZm9yIChsZXQgaSBpbiBsb2NhbFNoZWxmKSB7DQogICAgICAgICAgbG9jYWxTaGVsZltpXS5jb3ZlciA9IHRoaXMuX3VuRXNjYXBlKGxvY2FsU2hlbGZbaV0uY292ZXIpDQogICAgICAgICAgdGhpcy5ib29rcy5wdXNoKGxvY2FsU2hlbGZbaV0pDQogICAgICAgICAgYm9va0lkQXJyYXkucHVzaChpKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMub3B0aW9uID0gYm9va0lkQXJyYXk7DQogICAgICB9LA0KICAgICAgX3VuRXNjYXBlKHN0cil7DQogICAgICAgIHN0ciA9IHVuZXNjYXBlKHN0cikucmVwbGFjZSgiL2FnZW50LyIsICIiKQ0KICAgICAgICByZXR1cm4gc3RyDQogICAgICB9LA0KICAgICAgc2hvd0NoZWNrKCl7DQogICAgICAgIHRoaXMuaXNTaG93Q2hlY2sgPSB0cnVlOw0KICAgICAgICBsZXQgY2hlY2sgPSB0aGlzLiRyZWZzLmNoZWNrbGlzdDsNCiAgICAgICAgdGhpcy4kcmVmcy5kZWxldGUuc3R5bGUub3BhY2l0eSA9IDE7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2subGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjaGVja1tpXS4kZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaycNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGhpZGVDaGVjaygpew0KICAgICAgICBsZXQgY2hlY2sgPSB0aGlzLiRyZWZzLmNoZWNrbGlzdDsNCiAgICAgICAgdGhpcy4kcmVmcy5kZWxldGUuc3R5bGUub3BhY2l0eSA9IDA7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2subGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjaGVja1tpXS4kZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJw0KICAgICAgICB9DQogICAgICAgIHRoaXMuaXNTaG93Q2hlY2sgPSBmYWxzZQ0KICAgICAgfSwNCiAgICAgIGRlbGV0ZUJvb2tzKCl7DQogICAgICAgIGxldCBhcnIgPSB0aGlzLnZhbHVlOw0KICAgICAgICBsZXQgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7DQogICAgICAgIGxldCBsb2NhbFNoZWxmID0gSlNPTi5wYXJzZShzdG9yYWdlLmdldEl0ZW0oJ2Jvb2snKSkgPyBKU09OLnBhcnNlKHN0b3JhZ2UuZ2V0SXRlbSgnYm9vaycpKSA6IHt9Ow0KICAgICAgICBhcnIuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICBkZWxldGUgbG9jYWxTaGVsZlthcnJbaW5kZXhdXQ0KICAgICAgICB9KTsNCiAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCdib29rJywgSlNPTi5zdHJpbmdpZnkobG9jYWxTaGVsZikpDQogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKQ0KICAgICAgfSwNCiAgICAgIGdvUmVhZEJvb2tzKGlkKXsNCiAgICAgICAgaWYgKHRoaXMuaXNTaG93Q2hlY2spIHsNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgcGF0aDogYC9yZWFkQm9vay8ke2lkfWANCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICB9DQo="},{"version":3,"sources":["bookself.vue"],"names":[],"mappings":";AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bookself.vue","sourceRoot":"src/views/main/bookself","sourcesContent":["<template>\r\n  <div class=\"myBooks\">\r\n    <!-- <mt-header title=\"我的书架\" class=\"book-header\">\r\n      <router-link to=\"/classify\" slot=\"left\">\r\n        <mt-button icon=\"back\">返回</mt-button>\r\n      </router-link>\r\n      <mt-button slot=\"right\" @click=\"showCheck\" class=\"btn\" ref=\"Btn\" v-show=\"books.length\">编辑</mt-button>\r\n    </mt-header> -->\r\n    <!-- <div class=\"addBooks\" v-show=\"books.length<8\">\r\n      <mt-button type=\"primary\" @click=\"goAdd\">去添加</mt-button>\r\n    </div> -->\r\n    <HeadTop class=\"omg\" head-title=\"我的书架\"></HeadTop>\r\n    <div class=\"book-list\">\r\n      <div class=\"book-item\" v-for=\"(book,index) in books\" @click=\"goReadBooks(book.id)\">\r\n        <mt-checklist :options=\"[option[index]]\" v-model=\"value\" ref=\"checklist\" style=\"display: none\" class=\"check\">\r\n        </mt-checklist>\r\n        <div class=\"cover\">\r\n          <img :src=\"_unEscape(book.cover)\">\r\n        </div>\r\n        <p class=\"name\">{{book.title}}</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"delete\" ref=\"delete\" style=\"opacity: 0\">\r\n      <mt-button type=\"primary\" class=\"deleteBtn\" ref=\"deleteBtn\" @click=\"deleteBooks\">删除({{value.length}})\r\n      </mt-button>\r\n      <mt-button type=\"default\" class=\"deleteBtn\" ref=\"qxBtn\" @click=\"hideCheck\">取消</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script type=\"text/ecmascript-6\">\r\nimport HeadTop from '../../../components/header/Head.vue'\r\n  export default{\r\n      components:{HeadTop},\r\n    data(){\r\n      return {\r\n        books: [],\r\n        option: [],\r\n        value: [],\r\n        isShowCheck: false\r\n      }\r\n    },\r\n    created(){\r\n      this.getBooks();\r\n    },\r\n    methods: {\r\n      goAdd(){\r\n        this.$router.push({\r\n          path: '/categories'\r\n        })\r\n      },\r\n      getBooks(){\r\n        let bookIdArray = [];\r\n        let localShelf = JSON.parse(window.localStorage.getItem('book')) ? JSON.parse(window.localStorage.getItem('book')) : {};\r\n        for (let i in localShelf) {\r\n          localShelf[i].cover = this._unEscape(localShelf[i].cover)\r\n          this.books.push(localShelf[i])\r\n          bookIdArray.push(i)\r\n        }\r\n        this.option = bookIdArray;\r\n      },\r\n      _unEscape(str){\r\n        str = unescape(str).replace(\"/agent/\", \"\")\r\n        return str\r\n      },\r\n      showCheck(){\r\n        this.isShowCheck = true;\r\n        let check = this.$refs.checklist;\r\n        this.$refs.delete.style.opacity = 1;\r\n        for (let i = 0; i < check.length; i++) {\r\n          check[i].$el.style.display = 'block'\r\n        }\r\n      },\r\n      hideCheck(){\r\n        let check = this.$refs.checklist;\r\n        this.$refs.delete.style.opacity = 0;\r\n        for (let i = 0; i < check.length; i++) {\r\n          check[i].$el.style.display = 'none'\r\n        }\r\n        this.isShowCheck = false\r\n      },\r\n      deleteBooks(){\r\n        let arr = this.value;\r\n        let storage = window.localStorage;\r\n        let localShelf = JSON.parse(storage.getItem('book')) ? JSON.parse(storage.getItem('book')) : {};\r\n        arr.forEach((item, index) => {\r\n          delete localShelf[arr[index]]\r\n        });\r\n        storage.setItem('book', JSON.stringify(localShelf))\r\n        window.location.reload()\r\n      },\r\n      goReadBooks(id){\r\n        if (this.isShowCheck) {\r\n          return\r\n        }\r\n        this.$router.push({\r\n          path: `/readBook/${id}`\r\n        })\r\n      }\r\n    },\r\n  }\r\n</script>\r\n<style scoped lang=\"stylus\">\r\n  .myBooks\r\n    position fixed\r\n    width 100%\r\n    height 100%\r\n    top 0\r\n    left 0\r\n    right 0\r\n    bottom 0\r\n    background #fff\r\n    overflow-y scroll\r\n    max-width: 750px; \r\n    margin: 0 auto;\r\n    .book-header\r\n      height 100px\r\n      line-height 100px\r\n      font-size 25px\r\n      background #409eff\r\n      width 100%\r\n      z-index 10\r\n    .addBooks\r\n      position absolute\r\n      width 200px\r\n      height 80px\r\n      left 50%\r\n      top 60%\r\n      z-index 200\r\n      background #409eff\r\n      margin-left -100px\r\n      margin-top -80px\r\n      font-size 25px\r\n      border-radius 15px\r\n      button\r\n        width 100%\r\n        height 100%\r\n    .book-list\r\n      padding 20px\r\n      box-sizing border-box\r\n      overflow hidden\r\n      .book-item\r\n        float left\r\n        width 50%\r\n        overflow hidden\r\n        padding-right 15px\r\n        box-sizing border-box\r\n        text-align center\r\n        margin-bottom 20px\r\n        position relative\r\n        &:nth-child(4n)\r\n          padding-right 0\r\n        .cover\r\n          width 100%\r\n          background-position 50%\r\n          background-size 100%\r\n          img\r\n            width 100%\r\n            height 200px\r\n        .name\r\n          width 100%\r\n          margin-top 10px\r\n          font-size 15px\r\n          white-space nowrap\r\n          overflow hidden\r\n          text-overflow ellipsis\r\n  .btn\r\n    margin-right 10px\r\n  .check\r\n    position absolute\r\n    left 0\r\n    top 0\r\n    width 100%;\r\n    height 100%\r\n    text-align left\r\n  .delete\r\n    position absolute\r\n    width 100%\r\n    height 80px\r\n    bottom 0\r\n    left 0\r\n    display flex\r\n    .deleteBtn\r\n      flex 1\r\n      height 80px\r\n      box-sizing border-box\r\n</style>"]}]}