{"remainingRequest":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\src\\views\\login\\login.vue?vue&type=style&index=0&id=a49090ce&lang=css&","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\src\\views\\login\\login.vue","mtime":1658839101704},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1655715156000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5kdl9jb250ZW50ewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgdG9wOiAwdmg7OwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOwogICAgdGV4dC1hbGlnbjogLXdlYmtpdC1jZW50ZXI7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnJlZ2lzdGVyIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHRvcDogLTEwdmg7OwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOwogICAgdGV4dC1hbGlnbjogLXdlYmtpdC1jZW50ZXI7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnZhbmJjZWxsIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGRpc3BsYXk6IC13ZWJraXQtYm94OwogICAgZGlzcGxheTogLXdlYmtpdC1mbGV4OwogICAgZGlzcGxheTogZmxleDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDEwcHggMTZweDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBjb2xvcjogIzMyMzIzMzsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGxpbmUtaGVpZ2h0OiAyNHB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI3NCk7Cn0KLmJ1dG4gewogICAgY29sb3I6IGJsYWNrOwp9Ci8qIC5idXQgewogICAgbWFyZ2luOiAyMHB4IDUwcHg7Cn0gKi8K"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";AAwQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n<!-- 登录 -->\r\n    <div :style=\"background_login\" style=\"height:100vh;\">\r\n        <div style=\"height:35vh;line-height:35vh;text-align:center;\">\r\n            <span style=\"font-size:1.5rem;margin-bottom:15vh;color:#fff;\"><b>某某系统管理平台</b></span>\r\n        </div>\r\n        <!-- 登录 -->\r\n        <div class=\"dv_content\" v-show=\"loginShow\">\r\n            \r\n            <van-form @submit=\"onSubmit\" style=\"margin-top:0vh;\">\r\n                <van-field class=\"vanbcell\"\r\n                    v-model=\"username\"\r\n                    name=\"username\"\r\n                    label=\"\"\r\n                    border\r\n                    placeholder=\"手机号\"\r\n                    clearable\r\n                    :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n                >\r\n                <template #left-icon>\r\n                    <van-icon name=\"manager\" size=\"25\" color=\"#A2A2A2\" />\r\n                </template>\r\n                </van-field>\r\n                <van-field class=\"vanbcell\" style=\"margin-top:20px;\"\r\n                    v-model=\"password\"\r\n                    name=\"password\"\r\n                    show-password\r\n                    right-icon=\"eye\"\r\n                    label=\"\"\r\n                    placeholder=\"密码\"\r\n                    :type=\"!passwordStatus?'password':'text'\"\r\n                    @click-right-icon=\"passwordStatus=!passwordStatus\"\r\n                    :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n                >\r\n                <template #left-icon>\r\n                    <van-icon name=\"lock\"  size=\"25\" color=\"#AAA\" />\r\n                </template>\r\n                </van-field>\r\n                <div style=\"margin: 16px;\">\r\n                    <van-button  v-show=\"subShow\" round block size=\"normal\" type=\"info\" native-type=\"submit\">提交</van-button>\r\n                    <van-button v-show=\"subShowGo\" loading round block size=\"normal\" disabled type=\"info\" loading-text=\"登录中...\"></van-button>\r\n                </div>\r\n            </van-form>\r\n            <div @click=\"registerHandle()\"  style=\"text-align:center;\"> \r\n                <span style=\"color:block;font-family:'仿宋';\">注册</span>\r\n            </div>\r\n        </div>\r\n        <!-- 注册 -->\r\n        <div v-show=\"registerShow\" class=\"register\">\r\n            <van-form @submit=\"onSubmitRegister\" style=\"margin-top:5vh;\">\r\n                \r\n                <van-field class=\"vanbcell\"\r\n                    v-model=\"username\"\r\n                    name=\"username\"\r\n                    required\r\n                    label=\"用户名\"\r\n                    placeholder=\"用户名\"\r\n                    :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n                />\r\n                <van-field class=\"vanbcell\"\r\n                    v-model=\"phone_number\"\r\n                    required\r\n                    type=\"tel\"\r\n                    name=\"phone_number\"\r\n                    label=\"手机号\"\r\n                    placeholder=\"手机号\"\r\n                    :rules=\"[{ pattern: phoneReg, required: true, message: '请填写正确的手机号' }]\"\r\n                />\r\n                <van-field class=\"vanbcell\"\r\n                    v-model=\"password\"\r\n                    required\r\n                    name=\"password\"\r\n                    label=\"密码\"\r\n                    right-icon=\"eye\"\r\n                    placeholder=\"密码\"\r\n                    :type=\"!passwordStatus2?'password':'text'\"\r\n                    @click-right-icon=\"passwordStatus2=!passwordStatus2\"\r\n                    :rules=\"[{ pattern: passwordReg, required: true, message: '请填写数字大小写字母特殊字符混合的8~12位密码' }]\"\r\n                />\r\n                <van-field class=\"vanbcell\"\r\n                    v-model=\"agin_password\"\r\n                    required\r\n                    name=\"agin_password\"\r\n                    label=\"确认密码\"\r\n                    right-icon=\"eye\"\r\n                    :type=\"!passwordStatus3?'password':'text'\"\r\n                    @click-right-icon=\"passwordStatus3=!passwordStatus3\"\r\n                    placeholder=\"确认密码\"\r\n                    :rules=\"[{ validator, required: true, message: '请与上面密码保持一致' }]\"\r\n                />\r\n                <div style=\"margin: 16px;\">\r\n                    <van-button class=\"but\" v-show=\"subShow\" round block type=\"info\" native-type=\"submit\">注册提交</van-button>\r\n                    <van-button class=\"but\" v-show=\"subShowGo\" loading round block disabled type=\"info\" loading-text=\"登录中...\"></van-button>\r\n                </div>\r\n            </van-form>\r\n            <div @click=\"returnHandle()\" style=\"text-align:center;\"> \r\n                <span style=\"color:block;fontt-family:'仿宋';\" >返回登录</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { Notify,Toast,Dialog } from 'vant'\r\n// import { login } from '../api/login.js'\r\nexport default {\r\n    name: \"login\",\r\n    data() {\r\n        return {\r\n            username: '',\r\n            password: '',\r\n            phone_number: '',\r\n            agin_password: '',\r\n            user_company: '',\r\n            background_login: {\r\n                // backgroundImage:\"url(\" + require(\"../images/008.png\") + \")\",\r\n                backgroundRepeat:\"np-repeat\",\r\n                backgroundSize:\"100% 100%\",\r\n            },\r\n            passwordStatus: false,  //密码显影\r\n            passwordStatus2: false,  //\r\n            passwordStatus3: false, //\r\n            subShowGo: false,\r\n            subShow: true,\r\n            loginShow: true,\r\n            registerShow: false,\r\n            phoneReg: /^(13|14|15|16|17|18|19)[0-9]\\d{8}$/,\r\n            passwordReg: /^(?![A-Za-z0-9]+$)(?![a-z0-9_!@#$%^&*()+.]+$)(?![A-Za-z_!@#$%^&*()+.]+$)(?![A-Z0-9_!@#$%^&*()+.]+$)[a-zA-Z0-9_!@#$%^&*()+.]{8,12}$/\r\n        }\r\n    },\r\n    created() {},\r\n    mounted() {\r\n        // this.$router.go()\r\n    },\r\n    methods: {\r\n        validator(val) { //手机号验证\r\n            if(val !== this.password) {\r\n                return false\r\n            }\r\n        },\r\n        //登录提交\r\n        onSubmit(values) {\r\n            console.log(values);\r\n            this.subShowGo = true\r\n            this.subShow = false\r\n            let params = values\r\n            console.log(params, 'login');\r\n            console.log(sessionStorage.getItem('base_url_3'));\r\n            this.$http.post(sessionStorage.getItem('base_url_3')+'/api/account/login/',params, { timeout:3000 }).then((res) => {\r\n                console.log(res.data);\r\n                if(res.data.code == 200) {\r\n                    sessionStorage.setItem('token',res.data.data)\r\n                    Notify({ type: 'success', message: '登录成功' });\r\n                    console.log(res.data.name);\r\n                    sessionStorage.setItem('loginUser',res.data.name)\r\n                    this.$router.push('/admin')\r\n                    Toast.success('登录成功');\r\n                }else if(res.data.code == 400) {\r\n                    Toast.fail(res.data.msg);\r\n                    console.log(res.data.msg);\r\n                }else{\r\n                    Toast.fail(res.data.msg);\r\n                }\r\n                this.subShowGo = false\r\n                this.subShow = true\r\n            }).catch((err)=>{\r\n                console.log('请求失败'+err);\r\n                Toast.fail('请求失败');\r\n                this.subShowGo = false\r\n                this.subShow = true\r\n            })\r\n        },\r\n        //返回登录\r\n        returnHandle() {\r\n            console.log('0000');\r\n            this.loginShow = true\r\n            this.registerShow = false\r\n        },\r\n        //注册\r\n        registerHandle() {\r\n            this.loginShow = false\r\n            this.registerShow = true\r\n        },\r\n        //注册提交\r\n        onSubmitRegister(values) {\r\n            console.log(values);\r\n            const params = {\r\n                name: values.username,\r\n                phone_number: values.phone_number,\r\n                password: values.password,\r\n                user_company: values.user_company,\r\n                user_addr: '',\r\n                user_contact: '',\r\n                user_contact_phone: '',\r\n                user_charge: '',\r\n                user_tax: '',\r\n                user_level: ''\r\n            }\r\n            console.log(params);\r\n            console.log(sessionStorage.getItem('base_url_4'));\r\n            // this.$http.post(sessionStorage.getItem('base_url_4')+'/api/register-user-info/',params).then(res => {\r\n            this.$http.post(sessionStorage.getItem('base_url_4')+'/api/self-register-user-info/',params).then(res => {\r\n                console.log(res);\r\n                if(res.data.code == 200){\r\n                    Notify({type:'success', message:'注册成功'})\r\n                    Dialog.alert({\r\n                        title: '温馨提示',\r\n                        message: '注册信息已提交，等待管理员审核',\r\n                    }).then(() => {\r\n                    // on close\r\n                    });\r\n                    \r\n                }else{\r\n                    Toast.fail(res.data.msg)\r\n                    // Dialog.confirm({\r\n                    //     title: '温馨提示',\r\n                    //     message: '注册信息已提交，等待管理员审核',\r\n                    //     beforeClose,\r\n                    // })\r\n                }\r\n            }).catch(err => {\r\n                console.log(err,'请求失败');\r\n                Toast.fail('请求失败')\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    .dv_content{\r\n        position: relative;\r\n        top: 0vh;;\r\n        background-color: rgba(255,255,255,0.1);\r\n        text-align: -webkit-center;\r\n        text-align: center;\r\n    }\r\n    .register {\r\n        position: relative;\r\n        top: -10vh;;\r\n        background-color: rgba(255,255,255,0.1);\r\n        text-align: -webkit-center;\r\n        text-align: center;\r\n    }\r\n    .vanbcell {\r\n        position: relative;\r\n        display: -webkit-box;\r\n        display: -webkit-flex;\r\n        display: flex;\r\n        box-sizing: border-box;\r\n        width: 100%;\r\n        padding: 10px 16px;\r\n        overflow: hidden;\r\n        color: #323233;\r\n        font-size: 14px;\r\n        line-height: 24px;\r\n        background-color: rgba(255, 255, 255, 0.274);\r\n    }\r\n    .butn {\r\n        color: black;\r\n    }\r\n    /* .but {\r\n        margin: 20px 50px;\r\n    } */\r\n</style>\r\n"]}]}