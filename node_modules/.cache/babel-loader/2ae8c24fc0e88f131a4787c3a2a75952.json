{"remainingRequest":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\src\\views\\main\\bookself\\bookself.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\src\\views\\main\\bookself\\bookself.vue","mtime":1659527122853},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\babel.config.js","mtime":1583070725118},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\vue-cli3 demo\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgSGVhZFRvcCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2hlYWRlci9IZWFkLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBIZWFkVG9wOiBIZWFkVG9wCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9va3M6IFtdLAogICAgICBvcHRpb246IFtdLAogICAgICB2YWx1ZTogW10sCiAgICAgIGlzU2hvd0NoZWNrOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEJvb2tzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb0FkZDogZnVuY3Rpb24gZ29BZGQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2NhdGVnb3JpZXMnCiAgICAgIH0pOwogICAgfSwKICAgIGdldEJvb2tzOiBmdW5jdGlvbiBnZXRCb29rcygpIHsKICAgICAgdmFyIGJvb2tJZEFycmF5ID0gW107CiAgICAgIHZhciBsb2NhbFNoZWxmID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jvb2snKSkgPyBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYm9vaycpKSA6IHt9OwoKICAgICAgZm9yICh2YXIgaSBpbiBsb2NhbFNoZWxmKSB7CiAgICAgICAgbG9jYWxTaGVsZltpXS5jb3ZlciA9IHRoaXMuX3VuRXNjYXBlKGxvY2FsU2hlbGZbaV0uY292ZXIpOwogICAgICAgIHRoaXMuYm9va3MucHVzaChsb2NhbFNoZWxmW2ldKTsKICAgICAgICBib29rSWRBcnJheS5wdXNoKGkpOwogICAgICB9CgogICAgICB0aGlzLm9wdGlvbiA9IGJvb2tJZEFycmF5OwogICAgfSwKICAgIF91bkVzY2FwZTogZnVuY3Rpb24gX3VuRXNjYXBlKHN0cikgewogICAgICBzdHIgPSB1bmVzY2FwZShzdHIpLnJlcGxhY2UoIi9hZ2VudC8iLCAiIik7CiAgICAgIHJldHVybiBzdHI7CiAgICB9LAogICAgc2hvd0NoZWNrOiBmdW5jdGlvbiBzaG93Q2hlY2soKSB7CiAgICAgIHRoaXMuaXNTaG93Q2hlY2sgPSB0cnVlOwogICAgICB2YXIgY2hlY2sgPSB0aGlzLiRyZWZzLmNoZWNrbGlzdDsKICAgICAgdGhpcy4kcmVmcy5kZWxldGUuc3R5bGUub3BhY2l0eSA9IDE7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY2hlY2tbaV0uJGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICB9CiAgICB9LAogICAgaGlkZUNoZWNrOiBmdW5jdGlvbiBoaWRlQ2hlY2soKSB7CiAgICAgIHZhciBjaGVjayA9IHRoaXMuJHJlZnMuY2hlY2tsaXN0OwogICAgICB0aGlzLiRyZWZzLmRlbGV0ZS5zdHlsZS5vcGFjaXR5ID0gMDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2subGVuZ3RoOyBpKyspIHsKICAgICAgICBjaGVja1tpXS4kZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgfQoKICAgICAgdGhpcy5pc1Nob3dDaGVjayA9IGZhbHNlOwogICAgfSwKICAgIGRlbGV0ZUJvb2tzOiBmdW5jdGlvbiBkZWxldGVCb29rcygpIHsKICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7CiAgICAgIHZhciBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTsKICAgICAgdmFyIGxvY2FsU2hlbGYgPSBKU09OLnBhcnNlKHN0b3JhZ2UuZ2V0SXRlbSgnYm9vaycpKSA/IEpTT04ucGFyc2Uoc3RvcmFnZS5nZXRJdGVtKCdib29rJykpIDoge307CiAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGRlbGV0ZSBsb2NhbFNoZWxmW2FycltpbmRleF1dOwogICAgICB9KTsKICAgICAgc3RvcmFnZS5zZXRJdGVtKCdib29rJywgSlNPTi5zdHJpbmdpZnkobG9jYWxTaGVsZikpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICB9LAogICAgZ29SZWFkQm9va3M6IGZ1bmN0aW9uIGdvUmVhZEJvb2tzKGlkKSB7CiAgICAgIGlmICh0aGlzLmlzU2hvd0NoZWNrKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9yZWFkQm9vay8iLmNvbmNhdChpZCkKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;AA8BA;AACA;EACAA;IAAAC;EAAA,CADA;EAEAC,IAFA,kBAEA;IACA;MACAC,SADA;MAEAC,UAFA;MAGAC,SAHA;MAIAC;IAJA;EAMA,CATA;EAUAC,OAVA,qBAUA;IACA;EACA,CAZA;EAaAC;IACAC,KADA,mBACA;MACA;QACAC;MADA;IAGA,CALA;IAMAC,QANA,sBAMA;MACA;MACA;;MACA;QACAC;QACA;QACAC;MACA;;MACA;IACA,CAfA;IAgBAC,SAhBA,qBAgBAC,GAhBA,EAgBA;MACAA;MACA;IACA,CAnBA;IAoBAC,SApBA,uBAoBA;MACA;MACA;MACA;;MACA;QACAC;MACA;IACA,CA3BA;IA4BAC,SA5BA,uBA4BA;MACA;MACA;;MACA;QACAD;MACA;;MACA;IACA,CAnCA;IAoCAE,WApCA,yBAoCA;MACA;MACA;MACA;MACAC;QACA;MACA,CAFA;MAGAC;MACAC;IACA,CA7CA;IA8CAC,WA9CA,uBA8CAC,EA9CA,EA8CA;MACA;QACA;MACA;;MACA;QACAd;MADA;IAGA;EArDA;AAbA","names":["components","HeadTop","data","books","option","value","isShowCheck","created","methods","goAdd","path","getBooks","localShelf","bookIdArray","_unEscape","str","showCheck","check","hideCheck","deleteBooks","arr","storage","window","goReadBooks","id"],"sourceRoot":"src/views/main/bookself","sources":["bookself.vue"],"sourcesContent":["<template>\r\n  <div class=\"myBooks\">\r\n    <!-- <mt-header title=\"我的书架\" class=\"book-header\">\r\n      <router-link to=\"/classify\" slot=\"left\">\r\n        <mt-button icon=\"back\">返回</mt-button>\r\n      </router-link>\r\n      <mt-button slot=\"right\" @click=\"showCheck\" class=\"btn\" ref=\"Btn\" v-show=\"books.length\">编辑</mt-button>\r\n    </mt-header> -->\r\n    <!-- <div class=\"addBooks\" v-show=\"books.length<8\">\r\n      <mt-button type=\"primary\" @click=\"goAdd\">去添加</mt-button>\r\n    </div> -->\r\n    <HeadTop class=\"omg\" head-title=\"我的书架\"></HeadTop>\r\n    <div class=\"book-list\">\r\n      <div class=\"book-item\" v-for=\"(book,index) in books\" @click=\"goReadBooks(book.id)\">\r\n        <mt-checklist :options=\"[option[index]]\" v-model=\"value\" ref=\"checklist\" style=\"display: none\" class=\"check\">\r\n        </mt-checklist>\r\n        <div class=\"cover\">\r\n          <img :src=\"_unEscape(book.cover)\">\r\n        </div>\r\n        <p class=\"name\">{{book.title}}</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"delete\" ref=\"delete\" style=\"opacity: 0\">\r\n      <mt-button type=\"primary\" class=\"deleteBtn\" ref=\"deleteBtn\" @click=\"deleteBooks\">删除({{value.length}})\r\n      </mt-button>\r\n      <mt-button type=\"default\" class=\"deleteBtn\" ref=\"qxBtn\" @click=\"hideCheck\">取消</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script type=\"text/ecmascript-6\">\r\nimport HeadTop from '../../../components/header/Head.vue'\r\n  export default{\r\n      components:{HeadTop},\r\n    data(){\r\n      return {\r\n        books: [],\r\n        option: [],\r\n        value: [],\r\n        isShowCheck: false\r\n      }\r\n    },\r\n    created(){\r\n      this.getBooks();\r\n    },\r\n    methods: {\r\n      goAdd(){\r\n        this.$router.push({\r\n          path: '/categories'\r\n        })\r\n      },\r\n      getBooks(){\r\n        let bookIdArray = [];\r\n        let localShelf = JSON.parse(window.localStorage.getItem('book')) ? JSON.parse(window.localStorage.getItem('book')) : {};\r\n        for (let i in localShelf) {\r\n          localShelf[i].cover = this._unEscape(localShelf[i].cover)\r\n          this.books.push(localShelf[i])\r\n          bookIdArray.push(i)\r\n        }\r\n        this.option = bookIdArray;\r\n      },\r\n      _unEscape(str){\r\n        str = unescape(str).replace(\"/agent/\", \"\")\r\n        return str\r\n      },\r\n      showCheck(){\r\n        this.isShowCheck = true;\r\n        let check = this.$refs.checklist;\r\n        this.$refs.delete.style.opacity = 1;\r\n        for (let i = 0; i < check.length; i++) {\r\n          check[i].$el.style.display = 'block'\r\n        }\r\n      },\r\n      hideCheck(){\r\n        let check = this.$refs.checklist;\r\n        this.$refs.delete.style.opacity = 0;\r\n        for (let i = 0; i < check.length; i++) {\r\n          check[i].$el.style.display = 'none'\r\n        }\r\n        this.isShowCheck = false\r\n      },\r\n      deleteBooks(){\r\n        let arr = this.value;\r\n        let storage = window.localStorage;\r\n        let localShelf = JSON.parse(storage.getItem('book')) ? JSON.parse(storage.getItem('book')) : {};\r\n        arr.forEach((item, index) => {\r\n          delete localShelf[arr[index]]\r\n        });\r\n        storage.setItem('book', JSON.stringify(localShelf))\r\n        window.location.reload()\r\n      },\r\n      goReadBooks(id){\r\n        if (this.isShowCheck) {\r\n          return\r\n        }\r\n        this.$router.push({\r\n          path: `/readBook/${id}`\r\n        })\r\n      }\r\n    },\r\n  }\r\n</script>\r\n<style scoped lang=\"stylus\">\r\n  .myBooks\r\n    position fixed\r\n    width 100%\r\n    height 100%\r\n    top 0\r\n    left 0\r\n    right 0\r\n    bottom 0\r\n    background #fff\r\n    overflow-y scroll\r\n    max-width: 750px; \r\n    margin: 0 auto;\r\n    .book-header\r\n      height 100px\r\n      line-height 100px\r\n      font-size 25px\r\n      background #409eff\r\n      width 100%\r\n      z-index 10\r\n    .addBooks\r\n      position absolute\r\n      width 200px\r\n      height 80px\r\n      left 50%\r\n      top 60%\r\n      z-index 200\r\n      background #409eff\r\n      margin-left -100px\r\n      margin-top -80px\r\n      font-size 25px\r\n      border-radius 15px\r\n      button\r\n        width 100%\r\n        height 100%\r\n    .book-list\r\n      padding 20px\r\n      box-sizing border-box\r\n      overflow hidden\r\n      .book-item\r\n        float left\r\n        width 50%\r\n        overflow hidden\r\n        padding-right 15px\r\n        box-sizing border-box\r\n        text-align center\r\n        margin-bottom 20px\r\n        position relative\r\n        &:nth-child(4n)\r\n          padding-right 0\r\n        .cover\r\n          width 100%\r\n          background-position 50%\r\n          background-size 100%\r\n          img\r\n            width 100%\r\n            height 200px\r\n        .name\r\n          width 100%\r\n          margin-top 10px\r\n          font-size 15px\r\n          white-space nowrap\r\n          overflow hidden\r\n          text-overflow ellipsis\r\n  .btn\r\n    margin-right 10px\r\n  .check\r\n    position absolute\r\n    left 0\r\n    top 0\r\n    width 100%;\r\n    height 100%\r\n    text-align left\r\n  .delete\r\n    position absolute\r\n    width 100%\r\n    height 80px\r\n    bottom 0\r\n    left 0\r\n    display flex\r\n    .deleteBtn\r\n      flex 1\r\n      height 80px\r\n      box-sizing border-box\r\n</style>"]}]}